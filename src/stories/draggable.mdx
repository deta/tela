import { Meta, Source, ArgTypes, Canvas, Story } from "@storybook/blocks";
import * as DraggableStories from "./Draggable.stories";

<Meta of={DraggableStories} name="Example"/>

# Draggable

A draggable element can be used inside of a `Positionable` element to enable moving it around the board.

## Usage

> ðŸ’¡ Notice, that we need to use the `bind:` directive for the pos & size props, as the changes handled inside the Draggable component need to be applied to the state of the Positionable component as well.

<Source language="html" code={`
<script lang="ts">
  import Board from "$lib/Board.svelte";
  import Positionable from "$lib/Positionable.svelte";
  import Draggable from "$lib/Draggable.svelte";
  import type { TBoard, IBoardSettings } from "$lib/index.js";
  import { writable } from "svelte/store";

  const settings = writable({} satisfies IBoardSettings); // <- used to configure the board
  const board = writable({ viewOffset: { x: 0, y: 0 }, zoom: 1 } satisfies TBoard); // <- determines the initial state of the board

  const element = { pos: { x: 0, y: 0 }, size: { x: 150, y: 150} };
</script>

<main>
  <Board {settings} {board}>
    <Positionable pos={element.pos} size={element.size} z={1}>
      <Draggable bind:pos={element.pos} bind:size={element.size}>
      drag here.
      </Draggable>
      I am a positionable element.
    </Positionable>
  </Board>
</main>

<style>
  main {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
</style>
`} />
