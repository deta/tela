import{S as V,i as W,s as J,F as re,N as k,e as K,c as ee,b as se,f as m,O as q,j as d,z as le,G as fe,H as ue,I as ce,m as b,t as z,P as G,n as ge,D as L,E as x,Q as pe,p as S,q as $,h as _e,r as O,v,a as me,d as de,L as U,R as X,w,x as E,T as Y}from"./index-6ddd88a4.js";import{h as be,s as R,B as ze,P as A,w as Z}from"./Positionable-25bab829.js";import{g as ye}from"./spread-8a54911c.js";function De(n){let e,o,i,r,t;const f=n[7].default,l=re(f,n,n[6],null);let u=[n[3],{class:o="draggable "+(n[3].class||"")}],s={};for(let a=0;a<u.length;a+=1)s=k(s,u[a]);return{c(){e=K("div"),l&&l.c(),this.h()},l(a){e=ee(a,"DIV",{class:!0});var c=se(e);l&&l.l(c),c.forEach(m),this.h()},h(){q(e,s)},m(a,c){d(a,e,c),l&&l.m(e,null),i=!0,r||(t=le(e,"mousedown",n[2]),r=!0)},p(a,[c]){l&&l.p&&(!i||c&64)&&fe(l,f,a,a[6],i?ce(f,a[6],c,null):ue(a[6]),null),q(e,s=ye(u,[c&8&&a[3],(!i||c&8&&o!==(o="draggable "+(a[3].class||"")))&&{class:o}]))},i(a){i||(b(l,a),i=!0)},o(a){z(l,a),i=!1},d(a){a&&m(e),l&&l.d(a),r=!1,t()}}}function he(n,e,o){const i=["pos","size"];let r=G(e,i),t,f,{$$slots:l={},$$scope:u}=e,{pos:s}=e,{size:a}=e;const c=ge(),N=L("board");x(n,N,g=>o(10,f=g));const p=L("settings");x(n,p,g=>o(9,t=g));let _={init:{x:0,y:0},curr:{x:0,y:0},offset:{x:0,y:0}};function ae(g){if(be(g.target,"tela-ignore"))return;g.stopPropagation(),document.body.classList.add("dragging");let B=g.clientX,P=g.clientY;const y=t.SNAP_TO_GRID?R(B,t.GRID_SIZE):B,D=t.SNAP_TO_GRID?R(P,t.GRID_SIZE):P;_.init={x:y,y:D},_.curr={x:y,y:D},document.addEventListener("mousemove",I),document.addEventListener("mouseup",ie,{once:!0}),c("dragStart",{pos:s})}function I(g){var j,C,M,T;let B=g.clientX,P=g.clientY;_.offset={x:(B-_.curr.x)/f.zoom,y:(P-_.curr.y)/f.zoom},_.curr={x:g.clientX,y:g.clientY};const y=s.x+_.offset.x,D=s.y+_.offset.y;((j=t.BOUNDS)==null?void 0:j.minX)!==null&&y<t.BOUNDS.minX?o(4,s.x=t.BOUNDS.minX,s):((C=t.BOUNDS)==null?void 0:C.maxX)!==null&&y+a.x>t.BOUNDS.maxX?o(4,s.x=t.BOUNDS.maxX-a.x,s):o(4,s.x+=_.offset.x,s),((M=t.BOUNDS)==null?void 0:M.minY)!==null&&D<t.BOUNDS.minY?o(4,s.y=t.BOUNDS.minY,s):((T=t.BOUNDS)==null?void 0:T.maxY)!==null&&D+a.y>t.BOUNDS.maxY?o(4,s.y=t.BOUNDS.maxY-a.y,s):o(4,s.y+=_.offset.y,s),c("dragMove",{pos:s,offset:_.offset})}function ie(g){document.body.classList.remove("dragging"),document.removeEventListener("mousemove",I),c("dragEnd",{pos:s})}return n.$$set=g=>{e=k(k({},e),pe(g)),o(3,r=G(e,i)),"pos"in g&&o(4,s=g.pos),"size"in g&&o(5,a=g.size),"$$scope"in g&&o(6,u=g.$$scope)},[N,p,ae,r,s,a,u,l]}class te extends V{constructor(e){super(),W(this,e,he,De,J,{pos:4,size:5})}}function Se(n){let e;return{c(){e=w("drag here.")},l(o){e=E(o,"drag here.")},m(o,i){d(o,e,i)},d(o){o&&m(e)}}}function $e(n){let e,o,i,r,t;function f(s){n[6](s)}function l(s){n[7](s)}let u={$$slots:{default:[Se]},$$scope:{ctx:n}};return n[0].pos!==void 0&&(u.pos=n[0].pos),n[0].size!==void 0&&(u.size=n[0].size),e=new te({props:u}),U.push(()=>X(e,"pos",f)),U.push(()=>X(e,"size",l)),{c(){S(e.$$.fragment),r=w(`
      Positionable`)},l(s){$(e.$$.fragment,s),r=E(s,`
      Positionable`)},m(s,a){O(e,s,a),d(s,r,a),t=!0},p(s,a){const c={};a&1024&&(c.$$scope={dirty:a,ctx:s}),!o&&a&1&&(o=!0,c.pos=s[0].pos,Y(()=>o=!1)),!i&&a&1&&(i=!0,c.size=s[0].size,Y(()=>i=!1)),e.$set(c)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),t=!1},d(s){s&&m(r),v(e,s)}}}function Oe(n){let e;return{c(){e=w("drag here.")},l(o){e=E(o,"drag here.")},m(o,i){d(o,e,i)},d(o){o&&m(e)}}}function ve(n){let e,o,i,r,t;function f(s){n[8](s)}function l(s){n[9](s)}let u={$$slots:{default:[Oe]},$$scope:{ctx:n}};return n[1].pos!==void 0&&(u.pos=n[1].pos),n[1].size!==void 0&&(u.size=n[1].size),e=new te({props:u}),U.push(()=>X(e,"pos",f)),U.push(()=>X(e,"size",l)),{c(){S(e.$$.fragment),r=w(`
      Positionable`)},l(s){$(e.$$.fragment,s),r=E(s,`
      Positionable`)},m(s,a){O(e,s,a),d(s,r,a),t=!0},p(s,a){const c={};a&1024&&(c.$$scope={dirty:a,ctx:s}),!o&&a&2&&(o=!0,c.pos=s[1].pos,Y(()=>o=!1)),!i&&a&2&&(i=!0,c.size=s[1].size,Y(()=>i=!1)),e.$set(c)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){z(e.$$.fragment,s),t=!1},d(s){s&&m(r),v(e,s)}}}function Ne(n){let e,o,i,r;return e=new A({props:{pos:n[0].pos,size:n[0].size,z:1,$$slots:{default:[$e]},$$scope:{ctx:n}}}),i=new A({props:{pos:n[1].pos,size:n[1].size,z:1,$$slots:{default:[ve]},$$scope:{ctx:n}}}),{c(){S(e.$$.fragment),o=me(),S(i.$$.fragment)},l(t){$(e.$$.fragment,t),o=de(t),$(i.$$.fragment,t)},m(t,f){O(e,t,f),d(t,o,f),O(i,t,f),r=!0},p(t,f){const l={};f&1&&(l.pos=t[0].pos),f&1&&(l.size=t[0].size),f&1025&&(l.$$scope={dirty:f,ctx:t}),e.$set(l);const u={};f&2&&(u.pos=t[1].pos),f&2&&(u.size=t[1].size),f&1026&&(u.$$scope={dirty:f,ctx:t}),i.$set(u)},i(t){r||(b(e.$$.fragment,t),b(i.$$.fragment,t),r=!0)},o(t){z(e.$$.fragment,t),z(i.$$.fragment,t),r=!1},d(t){t&&m(o),v(e,t),v(i,t)}}}function Be(n){let e,o,i;return o=new ze({props:{settings:n[2],board:n[3],$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){e=K("main"),S(o.$$.fragment),this.h()},l(r){e=ee(r,"MAIN",{class:!0});var t=se(e);$(o.$$.fragment,t),t.forEach(m),this.h()},h(){_e(e,"class","draggableStory svelte-17w1y40")},m(r,t){d(r,e,t),O(o,e,null),i=!0},p(r,[t]){const f={};t&1027&&(f.$$scope={dirty:t,ctx:r}),o.$set(f)},i(r){i||(b(o.$$.fragment,r),i=!0)},o(r){z(o.$$.fragment,r),i=!1},d(r){r&&m(e),v(o)}}}function Pe(n,e,o){let{pos:i={x:0,y:0}}=e,{size:r={x:100,y:100}}=e;const t=Z({}),f=Z({viewOffset:{x:0,y:0},zoom:1}),l={pos:i,size:r},u={pos:{x:200,y:200},size:{x:100,y:100}};function s(p){n.$$.not_equal(l.pos,p)&&(l.pos=p,o(0,l))}function a(p){n.$$.not_equal(l.size,p)&&(l.size=p,o(0,l))}function c(p){n.$$.not_equal(u.pos,p)&&(u.pos=p,o(1,u))}function N(p){n.$$.not_equal(u.size,p)&&(u.size=p,o(1,u))}return n.$$set=p=>{"pos"in p&&o(4,i=p.pos),"size"in p&&o(5,r=p.size)},[l,u,t,f,i,r,s,a,c,N]}class oe extends V{constructor(e){super(),W(this,e,Pe,Be,J,{pos:4,size:5})}}const ne=oe;oe.__docgen={version:3,name:"DraggableStory.svelte",data:[{visibility:"public",description:null,keywords:[],name:"pos",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"object",type:"object"}},{visibility:"public",description:null,keywords:[],name:"size",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"object",type:"object"}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const Ue={component:ne,title:"Components/Draggable",tags:["autodocs"],argTypes:{pos:{x:{control:"number"},y:{control:"number"}},size:{x:{control:"number"},y:{control:"number"}}},args:{pos:{x:0,y:0},size:{x:200,y:200}}},Xe=n=>({Component:ne,props:n}),h=Xe.bind({});var F,H,Q;h.parameters={...h.parameters,docs:{...(F=h.parameters)==null?void 0:F.docs,source:{originalSource:`args => ({
  Component: DraggableStory,
  props: args
})`,...(Q=(H=h.parameters)==null?void 0:H.docs)==null?void 0:Q.source}}};const Ye=["Default"],Ie=Object.freeze(Object.defineProperty({__proto__:null,Default:h,__namedExportsOrder:Ye,default:Ue},Symbol.toStringTag,{value:"Module"}));export{Ie as D};
//# sourceMappingURL=Draggable.stories-5081aecc.js.map
