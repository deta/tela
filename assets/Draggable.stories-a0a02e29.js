import{S as oe,i as ne,s as ae,F as pe,N as q,e as ie,c as re,b as le,f as _,O as V,j as d,z as Z,G as me,H as _e,I as de,m as z,t as y,P as be,Q as F,n as ze,D as H,E as Q,R as ye,p as U,q as Y,h as he,r as T,v as X,a as De,d as Se,L,T as x,w as C,x as M,U as j}from"./index-76d2f1d2.js";import{h as $e,s as W,B as ve,P as J,w as K}from"./Positionable-6a060a99.js";import{g as Oe}from"./spread-8a54911c.js";function we(n){let e,o,i,r,t;const u=n[7].default,l=pe(u,n,n[6],null);let c=[n[3],{class:o="draggable "+(n[3].class||"")}],s={};for(let a=0;a<c.length;a+=1)s=q(s,c[a]);return{c(){e=ie("div"),l&&l.c(),this.h()},l(a){e=re(a,"DIV",{class:!0});var g=le(e);l&&l.l(g),g.forEach(_),this.h()},h(){V(e,s)},m(a,g){d(a,e,g),l&&l.m(e,null),i=!0,r||(t=[Z(e,"mousedown",n[2]),Z(e,"touchstart",n[2],{passive:!1})],r=!0)},p(a,[g]){l&&l.p&&(!i||g&64)&&me(l,u,a,a[6],i?de(u,a[6],g,null):_e(a[6]),null),V(e,s=Oe(c,[g&8&&a[3],(!i||g&8&&o!==(o="draggable "+(a[3].class||"")))&&{class:o}]))},i(a){i||(z(l,a),i=!0)},o(a){y(l,a),i=!1},d(a){a&&_(e),l&&l.d(a),r=!1,be(t)}}}function Ne(n,e,o){const i=["pos","size"];let r=F(e,i),t,u,{$$slots:l={},$$scope:c}=e,{pos:s}=e,{size:a}=e;const g=ze(),k=H("board");Q(n,k,f=>o(10,u=f));const p=H("settings");Q(n,p,f=>o(9,t=f));let m={init:{x:0,y:0},curr:{x:0,y:0},offset:{x:0,y:0}};function G(f,b){return{x:f-u.viewPort.x,y:b-u.viewPort.y+window.scrollY}}function ge(f){var v,O,w,N,P,B;const b=((O=(v=f.targetTouches)==null?void 0:v.item(0))==null?void 0:O.target)||f.target,{x:h,y:D}=G(((N=(w=f.targetTouches)==null?void 0:w.item(0))==null?void 0:N.clientX)||f.clientX,((B=(P=f.targetTouches)==null?void 0:P.item(0))==null?void 0:B.clientY)||f.clientY);if($e(b,"tela-ignore"))return;f.stopPropagation(),document.body.classList.add("dragging");const S=t.SNAP_TO_GRID?W(h,t.GRID_SIZE):h,$=t.SNAP_TO_GRID?W(D,t.GRID_SIZE):D;m.init={x:S,y:$},m.curr={x:S,y:$},document.addEventListener("mousemove",I),document.addEventListener("mouseup",R,{once:!0}),document.addEventListener("touchmove",I),document.addEventListener("touchend",R,{once:!0}),g("dragStart",{pos:s})}function I(f){var $,v,O,w,N,P,B,A;const{x:b,y:h}=G(((v=($=f.targetTouches)==null?void 0:$.item(0))==null?void 0:v.clientX)||f.clientX,((w=(O=f.targetTouches)==null?void 0:O.item(0))==null?void 0:w.clientY)||f.clientY);m.offset={x:(b-m.curr.x)/u.zoom,y:(h-m.curr.y)/u.zoom},m.curr={x:b,y:h};const D=s.x+m.offset.x,S=s.y+m.offset.y;((N=t.BOUNDS)==null?void 0:N.minX)!==null&&D<t.BOUNDS.minX?o(4,s.x=t.BOUNDS.minX,s):((P=t.BOUNDS)==null?void 0:P.maxX)!==null&&D+a.x>t.BOUNDS.maxX?o(4,s.x=t.BOUNDS.maxX-a.x,s):o(4,s.x+=m.offset.x,s),((B=t.BOUNDS)==null?void 0:B.minY)!==null&&S<t.BOUNDS.minY?o(4,s.y=t.BOUNDS.minY,s):((A=t.BOUNDS)==null?void 0:A.maxY)!==null&&S+a.y>t.BOUNDS.maxY?o(4,s.y=t.BOUNDS.maxY-a.y,s):o(4,s.y+=m.offset.y,s),g("dragMove",{pos:s,offset:m.offset})}function R(f){document.body.classList.remove("dragging"),document.removeEventListener("mousemove",I),document.removeEventListener("touchmove",I),g("dragEnd",{pos:s})}return n.$$set=f=>{e=q(q({},e),ye(f)),o(3,r=F(e,i)),"pos"in f&&o(4,s=f.pos),"size"in f&&o(5,a=f.size),"$$scope"in f&&o(6,c=f.$$scope)},[k,p,ge,r,s,a,c,l]}class ue extends oe{constructor(e){super(),ne(this,e,Ne,we,ae,{pos:4,size:5})}}function Pe(n){let e;return{c(){e=C("drag here.")},l(o){e=M(o,"drag here.")},m(o,i){d(o,e,i)},d(o){o&&_(e)}}}function Be(n){let e,o,i,r,t;function u(s){n[6](s)}function l(s){n[7](s)}let c={$$slots:{default:[Pe]},$$scope:{ctx:n}};return n[0].pos!==void 0&&(c.pos=n[0].pos),n[0].size!==void 0&&(c.size=n[0].size),e=new ue({props:c}),L.push(()=>x(e,"pos",u)),L.push(()=>x(e,"size",l)),{c(){U(e.$$.fragment),r=C(`
      Positionable`)},l(s){Y(e.$$.fragment,s),r=M(s,`
      Positionable`)},m(s,a){T(e,s,a),d(s,r,a),t=!0},p(s,a){const g={};a&1024&&(g.$$scope={dirty:a,ctx:s}),!o&&a&1&&(o=!0,g.pos=s[0].pos,j(()=>o=!1)),!i&&a&1&&(i=!0,g.size=s[0].size,j(()=>i=!1)),e.$set(g)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){s&&_(r),X(e,s)}}}function Ee(n){let e;return{c(){e=C("drag here.")},l(o){e=M(o,"drag here.")},m(o,i){d(o,e,i)},d(o){o&&_(e)}}}function Ue(n){let e,o,i,r,t;function u(s){n[8](s)}function l(s){n[9](s)}let c={$$slots:{default:[Ee]},$$scope:{ctx:n}};return n[1].pos!==void 0&&(c.pos=n[1].pos),n[1].size!==void 0&&(c.size=n[1].size),e=new ue({props:c}),L.push(()=>x(e,"pos",u)),L.push(()=>x(e,"size",l)),{c(){U(e.$$.fragment),r=C(`
      Positionable`)},l(s){Y(e.$$.fragment,s),r=M(s,`
      Positionable`)},m(s,a){T(e,s,a),d(s,r,a),t=!0},p(s,a){const g={};a&1024&&(g.$$scope={dirty:a,ctx:s}),!o&&a&2&&(o=!0,g.pos=s[1].pos,j(()=>o=!1)),!i&&a&2&&(i=!0,g.size=s[1].size,j(()=>i=!1)),e.$set(g)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){y(e.$$.fragment,s),t=!1},d(s){s&&_(r),X(e,s)}}}function Ye(n){let e,o,i,r;return e=new J({props:{pos:n[0].pos,size:n[0].size,z:1,$$slots:{default:[Be]},$$scope:{ctx:n}}}),i=new J({props:{pos:n[1].pos,size:n[1].size,z:1,$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){U(e.$$.fragment),o=De(),U(i.$$.fragment)},l(t){Y(e.$$.fragment,t),o=Se(t),Y(i.$$.fragment,t)},m(t,u){T(e,t,u),d(t,o,u),T(i,t,u),r=!0},p(t,u){const l={};u&1&&(l.pos=t[0].pos),u&1&&(l.size=t[0].size),u&1025&&(l.$$scope={dirty:u,ctx:t}),e.$set(l);const c={};u&2&&(c.pos=t[1].pos),u&2&&(c.size=t[1].size),u&1026&&(c.$$scope={dirty:u,ctx:t}),i.$set(c)},i(t){r||(z(e.$$.fragment,t),z(i.$$.fragment,t),r=!0)},o(t){y(e.$$.fragment,t),y(i.$$.fragment,t),r=!1},d(t){t&&_(o),X(e,t),X(i,t)}}}function Te(n){let e,o,i;return o=new ve({props:{settings:n[2],board:n[3],$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){e=ie("main"),U(o.$$.fragment),this.h()},l(r){e=re(r,"MAIN",{class:!0});var t=le(e);Y(o.$$.fragment,t),t.forEach(_),this.h()},h(){he(e,"class","draggableStory svelte-17w1y40")},m(r,t){d(r,e,t),T(o,e,null),i=!0},p(r,[t]){const u={};t&1027&&(u.$$scope={dirty:t,ctx:r}),o.$set(u)},i(r){i||(z(o.$$.fragment,r),i=!0)},o(r){y(o.$$.fragment,r),i=!1},d(r){r&&_(e),X(o)}}}function Xe(n,e,o){let{pos:i={x:0,y:0}}=e,{size:r={x:100,y:100}}=e;const t=K({}),u=K({viewOffset:{x:0,y:0},zoom:1}),l={pos:i,size:r},c={pos:{x:200,y:200},size:{x:100,y:100}};function s(p){n.$$.not_equal(l.pos,p)&&(l.pos=p,o(0,l))}function a(p){n.$$.not_equal(l.size,p)&&(l.size=p,o(0,l))}function g(p){n.$$.not_equal(c.pos,p)&&(c.pos=p,o(1,c))}function k(p){n.$$.not_equal(c.size,p)&&(c.size=p,o(1,c))}return n.$$set=p=>{"pos"in p&&o(4,i=p.pos),"size"in p&&o(5,r=p.size)},[l,c,t,u,i,r,s,a,g,k]}class ce extends oe{constructor(e){super(),ne(this,e,Xe,Te,ae,{pos:4,size:5})}}const fe=ce;ce.__docgen={version:3,name:"DraggableStory.svelte",data:[{visibility:"public",description:null,keywords:[],name:"pos",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"object",type:"object"}},{visibility:"public",description:null,keywords:[],name:"size",kind:"let",static:!1,readonly:!1,type:{kind:"type",text:"object",type:"object"}}],computed:[],methods:[],components:[],description:null,keywords:[],events:[],slots:[],refs:[]};const ke={component:fe,title:"Components/Draggable",tags:["autodocs"],argTypes:{pos:{x:{control:"number"},y:{control:"number"}},size:{x:{control:"number"},y:{control:"number"}}},args:{pos:{x:0,y:0},size:{x:200,y:200}}},Ie=n=>({Component:fe,props:n}),E=Ie.bind({});var ee,se,te;E.parameters={...E.parameters,docs:{...(ee=E.parameters)==null?void 0:ee.docs,source:{originalSource:`args => ({
  Component: DraggableStory,
  props: args
})`,...(te=(se=E.parameters)==null?void 0:se.docs)==null?void 0:te.source}}};const Le=["Default"],Me=Object.freeze(Object.defineProperty({__proto__:null,Default:E,__namedExportsOrder:Le,default:ke},Symbol.toStringTag,{value:"Module"}));export{Me as D};
//# sourceMappingURL=Draggable.stories-a0a02e29.js.map
